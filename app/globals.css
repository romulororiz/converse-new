@import 'tailwindcss';
@import '@neondatabase/auth/ui/tailwind';

/* ── Ink & Gold — Dark Luxury Design System ── */
@theme {
	--font-sans: var(
		--font-instrument,
		ui-sans-serif,
		system-ui,
		-apple-system,
		sans-serif
	);
	--font-serif: var(--font-cormorant, 'Georgia', 'Times New Roman', serif);
	--font-mono: var(--font-dm-mono, 'Courier New', monospace);

	--color-background: var(--bg);
	--color-foreground: var(--text-primary);
	--color-card: var(--bg-surface);
	--color-card-foreground: var(--text-primary);
	--color-popover: var(--bg-elevated);
	--color-popover-foreground: var(--text-primary);
	--color-primary: var(--neo-accent);
	--color-primary-foreground: var(--text-on-accent);
	--color-secondary: var(--bg-subtle);
	--color-secondary-foreground: var(--text-primary);
	--color-muted: var(--bg-subtle);
	--color-muted-foreground: var(--text-muted);
	--color-accent: var(--neo-accent);
	--color-accent-foreground: var(--text-on-accent);
	--color-destructive: var(--neo-danger);
	--color-border: var(--border);
	--color-input: var(--bg-elevated);
	--color-ring: var(--neo-accent);

	--color-success: var(--neo-success);
	--color-warning: var(--neo-warning);
	--color-danger: var(--neo-danger);
	--color-paper: var(--bg-surface);
	--color-paper-foreground: var(--text-primary);
	--color-highlight: var(--neo-accent);
	--color-highlight-bg: var(--neo-accent-light);

	--color-surface-1: var(--bg-surface);
	--color-surface-2: var(--bg-subtle);
	--color-accent-glow: var(--neo-accent-glow);

	--color-sidebar: var(--bg-surface);
	--color-sidebar-foreground: var(--text-primary);
	--color-sidebar-primary: var(--neo-accent);
	--color-sidebar-primary-foreground: var(--text-on-accent);
	--color-sidebar-accent: var(--bg-overlay);
	--color-sidebar-accent-foreground: var(--text-primary);
	--color-sidebar-border: var(--border);
	--color-sidebar-ring: var(--neo-accent);

	/* Deep shadows for dark theme */
	--shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3), 0 4px 16px rgba(0, 0, 0, 0.2);
	--shadow-md: 0 4px 20px rgba(0, 0, 0, 0.4), 0 2px 6px rgba(0, 0, 0, 0.25);
	--shadow-lg: 0 8px 40px rgba(0, 0, 0, 0.5), 0 2px 8px rgba(0, 0, 0, 0.3);
	--shadow-glow: 0 0 30px var(--neo-accent-glow);
	--shadow-book: 0 20px 60px rgba(0, 0, 0, 0.65), 0 4px 12px rgba(0, 0, 0, 0.4);

	--radius-sm: 4px;
	--radius-md: 8px;
	--radius-lg: 14px;
	--radius-xl: 22px;
	--radius-full: 9999px;
}

:root {
	/* ── Backgrounds — warm dark hierarchy ── */
	--bg: #0e0b08;
	--bg-surface: #181410;
	--bg-subtle: #221d17;
	--bg-elevated: #2d271f;
	--bg-overlay: #392f25;
	--chat-bg: #0b0906;
	--composer-bg: rgba(24, 20, 16, 0.88);

	/* ── Borders — subtle gold hairlines ── */
	--border: rgba(201, 168, 76, 0.13);
	--border-strong: rgba(201, 168, 76, 0.28);
	--neo-border: rgba(201, 168, 76, 0.13);
	--neo-border-strong: rgba(201, 168, 76, 0.28);

	/* ── Text — warm cream hierarchy ── */
	--text-primary: #f0e6cc;
	--text-secondary: #b09878;
	--text-muted: #6b5840;
	--text: #f0e6cc;
	--text-on-accent: #0e0b08;

	/* ── Accent — antique gold ── */
	--neo-accent: #c9a84c;
	--neo-accent-hover: #e8c97a;
	--neo-accent-light: #2d2412;
	--neo-accent-glow: rgba(201, 168, 76, 0.22);
	--neo-highlight: #c9a84c;
	--neo-highlight-bg: rgba(201, 168, 76, 0.08);
	--accent: #c9a84c;

	/* ── Semantic ── */
	--neo-success: #4caf82;
	--neo-warning: #c9a84c;
	--neo-danger: #e05c5c;

	/* ── Legacy compat aliases ── */
	--surface-1: var(--bg-surface);
	--surface-2: var(--bg-subtle);
	--surface-3: var(--bg-elevated);
	--neo-surface-1: var(--bg-surface);
	--neo-surface-2: var(--bg-subtle);
	--neo-paper: var(--bg-surface);
	--neo-paper-text: var(--text-primary);
	--danger: var(--neo-danger);
}

/* ── Custom scrollbar — gold tinted ── */
* {
	scrollbar-width: thin;
	scrollbar-color: rgba(201, 168, 76, 0.15) transparent;
}
::-webkit-scrollbar {
	width: 5px;
	height: 5px;
}
::-webkit-scrollbar-track {
	background: transparent;
}
::-webkit-scrollbar-thumb {
	background-color: rgba(201, 168, 76, 0.15);
	border-radius: 9999px;
}
::-webkit-scrollbar-thumb:hover {
	background-color: rgba(201, 168, 76, 0.3);
}

textarea {
	scrollbar-width: none;
}
textarea::-webkit-scrollbar {
	display: none;
}

/* ── Base resets ── */
@layer base {
	* {
		@apply border-border;
		outline-color: var(--neo-accent);
	}
	body {
		@apply bg-background text-foreground antialiased;
		background-color: var(--bg);
		font-family: var(--font-instrument, ui-sans-serif, system-ui, sans-serif);
	}
	a {
		color: inherit;
		text-decoration: none;
	}
	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		font-family: var(--font-cormorant, Georgia, serif);
		font-weight: 600;
		letter-spacing: -0.01em;
	}

	/* Global pointer cursor for all interactive elements */
	button,
	[role='button'],
	a[href],
	summary,
	select,
	[type='checkbox'],
	[type='radio'] {
		cursor: pointer;
	}
}

/* ── Utilities ── */
@layer utilities {
	/* --- Layout helpers --- */
	.hide-scrollbar {
		scrollbar-width: none !important;
		-ms-overflow-style: none !important;
	}
	.hide-scrollbar::-webkit-scrollbar {
		width: 0 !important;
		height: 0 !important;
		display: none !important;
		background: transparent !important;
	}
	.cv-auto {
		content-visibility: auto;
		contain-intrinsic-size: auto 300px;
	}
	.mono {
		font-family: var(--font-dm-mono, 'Courier New', monospace);
	}

	/* --- Core card system --- */
	.ink-card {
		background-color: var(--bg-surface);
		border: 1px solid var(--border);
		border-radius: var(--radius-lg);
		box-shadow:
			0 2px 12px rgba(0, 0, 0, 0.35),
			0 1px 3px rgba(0, 0, 0, 0.2);
	}

	.ink-panel {
		background-color: var(--bg-elevated);
		border: 1px solid var(--border);
		border-radius: var(--radius-md);
		box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.03);
	}

	/* --- Button system --- */
	.gold-button {
		background-color: var(--neo-accent);
		color: var(--text-on-accent);
		font-weight: 600;
		border-radius: var(--radius-md);
		transition: all 180ms ease-out;
	}
	.gold-button:hover {
		background-color: var(--neo-accent-hover);
		box-shadow:
			0 4px 20px var(--neo-accent-glow),
			0 2px 8px rgba(0, 0, 0, 0.3);
	}

	.ghost-gold {
		background-color: transparent;
		color: var(--neo-accent);
		border: 1px solid var(--border-strong);
		border-radius: var(--radius-md);
		transition: all 180ms ease-out;
	}
	.ghost-gold:hover {
		background-color: var(--neo-accent-light);
		border-color: var(--neo-accent);
		color: var(--neo-accent-hover);
	}

	.ghost-button {
		background-color: transparent;
		color: var(--text-primary);
		border-radius: var(--radius-md);
		transition: all 180ms ease-out;
	}
	.ghost-button:hover {
		background-color: var(--bg-overlay);
	}

	/* --- Legacy button aliases (keep existing code working) --- */
	.accent-button {
		background-color: var(--neo-accent);
		color: var(--text-on-accent);
		font-weight: 600;
		border-radius: var(--radius-md);
		transition: all 180ms ease-out;
	}
	.accent-button:hover {
		background-color: var(--neo-accent-hover);
		box-shadow: 0 4px 20px var(--neo-accent-glow);
	}

	.outline-button {
		background-color: transparent;
		color: var(--text-primary);
		border: 1px solid var(--border);
		border-radius: var(--radius-md);
		transition: all 180ms ease-out;
	}
	.outline-button:hover {
		background-color: var(--bg-overlay);
		border-color: var(--border-strong);
	}

	/* --- Legacy surface aliases --- */
	.surface-card {
		background-color: var(--bg-surface);
		border: 1px solid var(--border);
		border-radius: var(--radius-lg);
		box-shadow:
			0 2px 12px rgba(0, 0, 0, 0.35),
			0 1px 3px rgba(0, 0, 0, 0.2);
	}
	.surface-panel {
		background-color: var(--bg-surface);
		border: 1px solid var(--border);
	}
	.surface-raised {
		background-color: var(--bg-subtle);
		border: 1px solid var(--border);
		border-radius: var(--radius-lg);
	}
	.surface-inset {
		background-color: var(--bg-elevated);
		border: 1px solid var(--border);
		border-radius: var(--radius-md);
	}

	/* --- Typography accents --- */
	.book-spine {
		border-left: 3px solid var(--neo-accent);
		padding-left: 1rem;
	}

	.gold-rule {
		border-color: var(--border-strong);
	}

	.text-gradient {
		background: linear-gradient(135deg, #c9a84c, #e8c97a);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-clip: text;
	}

	/* --- Decorative effects --- */
	.lamp-glow {
		position: absolute;
		border-radius: 9999px;
		pointer-events: none;
		background: radial-gradient(
			circle,
			rgba(201, 168, 76, 0.18) 0%,
			transparent 70%
		);
	}

	.hero-gradient {
		background:
			radial-gradient(
				ellipse 100% 80% at 70% 20%,
				rgba(201, 168, 76, 0.06) 0%,
				transparent 60%
			),
			radial-gradient(
				ellipse 80% 60% at 20% 80%,
				rgba(201, 168, 76, 0.04) 0%,
				transparent 55%
			);
	}

	.cta-gradient {
		background: linear-gradient(135deg, #c9a84c, #a88030);
	}

	.glow-accent {
		box-shadow: 0 0 30px var(--neo-accent-glow);
	}

	/* --- Card accents --- */
	.paper-card {
		background-color: var(--bg-surface);
		color: var(--text-primary);
		border-radius: var(--radius-md);
		border: 1px solid var(--border);
		box-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);
	}

	.accent-border-left {
		border-left: 3px solid var(--neo-accent);
	}

	.highlight-callout {
		background-color: var(--neo-highlight-bg);
		border: 1px solid rgba(201, 168, 76, 0.18);
		border-radius: var(--radius-md);
		border-left: 3px solid var(--neo-highlight);
	}

	/* ── Skip-to-content ── */
	.skip-link {
		position: absolute;
		top: -100%;
		left: 1rem;
		padding: 0.5rem 1rem;
		background-color: var(--neo-accent);
		color: var(--text-on-accent);
		font-size: 0.875rem;
		font-weight: 600;
		border-radius: var(--radius-sm);
		z-index: 9999;
		transition: top 0.1s;
	}
	.skip-link:focus {
		top: 1rem;
	}

	/* ── Auth page entrance animation ── */
	@keyframes auth-fade-up {
		from {
			opacity: 0;
			transform: translateY(14px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}
	.auth-appear {
		animation: auth-fade-up 0.5s ease-out both;
	}
	.auth-appear-d1 {
		animation-delay: 0.1s;
	}
	.auth-appear-d2 {
		animation-delay: 0.25s;
	}
	.auth-appear-d3 {
		animation-delay: 0.4s;
	}
}

/* ── Neon Auth Form Overrides ──
   Uses data-slot selectors that match the Neon Auth component structure.
   Must live OUTSIDE @layer so they beat the library styles. */

/* Card wrapper — make transparent */
.neon-auth-form [data-slot='card'] {
	background: transparent !important;
	border: none !important;
	box-shadow: none !important;
	padding: 0 !important;
}

/* Labels */
.neon-auth-form [data-slot='label'] {
	color: var(--text-secondary) !important;
	font-weight: 500 !important;
	font-size: 13px !important;
}

/* Text inputs */
.neon-auth-form [data-slot='input'] {
	background-color: var(--bg-elevated) !important;
	border: 1.5px solid var(--border) !important;
	border-radius: var(--radius-md) !important;
	color: var(--text-primary) !important;
	font-size: 14px !important;
	padding: 10px 14px !important;
	transition: border-color 0.15s ease !important;
}
.neon-auth-form [data-slot='input']::placeholder {
	color: var(--text-muted) !important;
}
.neon-auth-form [data-slot='input']:focus {
	border-color: var(--neo-accent) !important;
	outline: none !important;
	box-shadow: 0 0 0 3px var(--neo-accent-glow) !important;
}

/* Primary button (Submit / Sign in / Sign up) */
.neon-auth-form [data-slot='button'].bg-primary {
	background-color: var(--neo-accent) !important;
	color: var(--text-on-accent) !important;
	font-weight: 600 !important;
	border-radius: var(--radius-md) !important;
	font-size: 14px !important;
	padding: 10px 0 !important;
	transition:
		background-color 0.15s ease,
		box-shadow 0.15s ease !important;
}
.neon-auth-form [data-slot='button'].bg-primary:hover {
	background-color: var(--neo-accent-hover) !important;
	box-shadow: 0 4px 14px var(--neo-accent-glow) !important;
}

/* Social / outline buttons (Google, GitHub, etc.) */
.neon-auth-form [data-slot='button'].border.bg-background {
	background-color: var(--bg-elevated) !important;
	color: var(--text-secondary) !important;
	border: 1.5px solid var(--border) !important;
	border-radius: var(--radius-md) !important;
	font-weight: 500 !important;
	font-size: 14px !important;
	transition:
		border-color 0.15s ease,
		background-color 0.15s ease !important;
}
.neon-auth-form [data-slot='button'].border.bg-background:hover {
	background-color: var(--bg-overlay) !important;
	border-color: var(--border-strong) !important;
	color: var(--text-primary) !important;
}

/* Footer link buttons ("Already have an account?", "Forgot password?") */
.neon-auth-form [data-slot='card-footer'] [data-slot='button'] {
	color: var(--neo-accent) !important;
	font-weight: 500 !important;
}
.neon-auth-form [data-slot='card-footer'] [data-slot='button']:hover {
	text-decoration: underline !important;
}

/* Separator / divider */
.neon-auth-form [data-slot='separator'] {
	border-color: var(--border) !important;
}

/* Generic text inherits color */
.neon-auth-form p,
.neon-auth-form span,
.neon-auth-form div {
	color: inherit;
}

/* ── Focus ring ── */
*:focus-visible {
	outline: 2px solid var(--neo-accent);
	outline-offset: 2px;
}

/* ── Reduced motion ── */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}
}
